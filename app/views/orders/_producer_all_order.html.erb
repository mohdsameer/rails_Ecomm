<ul class="order_tabs_wrap" id="tabs-nav">
  <li class="tabs_items"><a href="#tab1"><span class="tabs_notify"><%= orders.length %></span>All Orders</a></li>
  <li class="tabs_items active"><a href="#tab2"><span class="tabs_notify"><%= orders.inproduction_order.length %></span>New Order</a></li>
  <li class="tabs_items"><a href="#tab3"><span class="tabs_notify fulfilled"><%= orders.fullfilled_order.length %></span>Fulfilled Orders</a></li>
  <div class="show_download_slip" style="display: none;">
    <%= link_to "#", class: "slip_btn_wrap" do %>
      Download all orders
      <svg class="slip_icon" xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
        <path d="M4.5 19C4.5 18.4477 4.94772 18 5.5 18H19.5C20.0523 18 20.5 18.4477 20.5 19C20.5 19.5523 20.0523 20 19.5 20H5.5C4.94772 20 4.5 19.5523 4.5 19Z" fill="black"/>
        <path d="M5.5 20C4.94772 20 4.5 19.5523 4.5 19V17C4.5 16.4477 4.94772 16 5.5 16C6.05228 16 6.5 16.4477 6.5 17V19C6.5 19.5523 6.05228 20 5.5 20Z" fill="black"/>
        <path d="M19.5 20C18.9477 20 18.5 19.5523 18.5 19V17C18.5 16.4477 18.9477 16 19.5 16C20.0523 16 20.5 16.4477 20.5 17V19C20.5 19.5523 20.0523 20 19.5 20Z" fill="black"/>
        <path d="M12.5 15C12.2927 15.0016 12.09 14.9387 11.92 14.82L7.92 12C7.47119 11.6816 7.36393 11.0604 7.68 10.61C7.83307 10.3916 8.06708 10.2433 8.32998 10.1982C8.59289 10.1532 8.86291 10.215 9.08 10.37L12.5 12.76L15.9 10.2C16.3418 9.86863 16.9686 9.95817 17.3 10.4C17.6314 10.8418 17.5418 11.4686 17.1 11.8L13.1 14.8C12.9269 14.9298 12.7164 15 12.5 15Z" fill="black"/>
        <path d="M12.5 13C11.9477 13 11.5 12.5523 11.5 12V4C11.5 3.44772 11.9477 3 12.5 3C13.0523 3 13.5 3.44772 13.5 4V12C13.5 12.5523 13.0523 13 12.5 13Z" fill="black"/>
      </svg>
    <% end %>
  </div>
</ul>

<div id="tabs-content">
  <div id="tab1" class="tab-content">
    <%= render "all_order", orders: orders.order(created_at: :desc) %>
  </div>
  <div id="tab2" class="tab-content">
    <%= render "all_order", orders: orders.inproduction_order.order(priority: :desc).order(created_at: :asc) %>
  </div>
  <div id="tab3" class="tab-content">
    <%= render "all_order", orders: orders.fullfilled_order.order(created_at: :desc) %>
  </div>
</div>

<script type="text/javascript">
  // $('#tabs-nav li:first-child').addClass('active');
  $('.tab-content').hide();
  $($('.tab-content')[1]).show();

  $('#tabs-nav li').click(function(){
    $('#tabs-nav li').removeClass('active');
    $(this).addClass('active');
    $('.tab-content').hide();
    
    var activeTab = $(this).find('a').attr('href');
    $(activeTab).fadeIn();
    return false;
  });

  $('.collapse_show').click(function () {
    $(this).closest('.tbody_row').find('.collapse_data').slideToggle(800);
  });

  $('.collapse_hide').click(function () {
    $(this).closest('.tbody_row').find('.collapse_data').slideUp(800);
  });

  $('.drop_icon_box').on('click', function() {
    var dropdownContent = $(this).closest('.tbody_row').find('.menu_drop')
    $('.menu_drop').not(dropdownContent).hide();
    dropdownContent.toggle();
  });

  $(document).on('click', function(e) {
    if (!$(e.target).closest('.drop_icon_box, .menu_drop').length) {
        $(".menu_drop").hide();
    }
  });

  var $checkboxes = $('.custom_info_table .order_td input[type="checkbox"]');
  $checkboxes.change(function(){
    var countCheckedCheckboxes = $checkboxes.filter(':checked').length;
    $('#count-checked-checkboxes').text(countCheckedCheckboxes);
  });

  $('.order_checked').change(function() {
    if ($(this).is(':checked')) {
      $('.show_download_slip').show();
    }
    var checkedOrderIds = [];
    $('.order_checked:checked').each(function() {
      checkedOrderIds.push($(this).val());
    });

</script>
